<div class="modal modal-open">
  <div class="modal-box">
    <h3 class="font-bold text-lg">Passwort ändern</h3>

    <form 
      #passwordForm="ngForm"
      (ngSubmit)="onSubmit(passwordForm)"
      class="form-control space-y-4 mt-4"
      novalidate
    >
      <!-- Mitarbeitnummer -->
      <input 
        type="text" 
        placeholder="Mitarbeiter Nummer" 
        class="input input-bordered w-full"
        name="employeeId"
        required
        [(ngModel)]="formData.employeeId"
      />

      <!-- Altes Passwort -->
      <input 
        type="password" 
        placeholder="Altes Passwort" 
        class="input input-bordered w-full"
        name="oldPassword"
        required
        [(ngModel)]="formData.oldPassword"
      />

      <!-- Neues Passwort -->
      <input 
        type="password" 
        placeholder="Neues Passwort" 
        class="input input-bordered w-full"
        name="newPassword"
        required
        minlength="8"
        [(ngModel)]="formData.newPassword"
      />

      <!-- Neues Passwort bestätigen -->
      <input 
        type="password" 
        placeholder="Neues Passwort bestätigen" 
        class="input input-bordered w-full"
        name="confirmNewPassword"
        required
        [(ngModel)]="formData.confirmNewPassword"
      />

      <!-- Validierungs-Fehler -->
      <div class="text-red-500 text-sm" *ngIf="newPasswordEqualsOld()">
        Das neue Passwort darf nicht gleich dem alten sein.
      </div>
      <div class="text-red-500 text-sm" *ngIf="newPasswordsDoNotMatch()">
        Die neuen Passwörter stimmen nicht überein.
      </div>
      <div class="text-red-500 text-sm" *ngIf="newPasswordTooShort()">
        Das neue Passwort muss mindestens 8 Zeichen lang sein.
      </div>

      <!-- Buttons -->
      <div class="modal-action">
        <button 
          type="submit" 
          class="btn btn-secondary"
          [disabled]="passwordForm.invalid || newPasswordEqualsOld() || newPasswordsDoNotMatch()"
        >
          Save
        </button>

        <button type="button" class="btn" (click)="closeModal()">Cancel</button>
      </div>
    </form>
  </div>
</div>
